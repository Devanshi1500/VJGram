

<div class="card mb-3">
	<div class="card-header">
		<div class="row">
	<div class="card-body">
		<h2><a class="article-title">{{ object.title }}</a></h2>
		<p class="article-content">{{ object.description }}</p>

		{% if group.creator == user %}
		  <div>
		  <a class="btn btn secondary btn-sm mt-1" href="{%url 'group-update' group.group_id %}" >Update</a>
		  <a class="btn btn danger btn-sm mt-1" href="{%url 'group-delete' group.group_id %}"> Delete</a>
		  </div>
		{% endif %}
	</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<style>
  body {
    font:0.8em Arial;
  }

  .chat .messages {
    border:1 px solid;
    background-color:#FFE4C4;
    width:250px;
    padding:10px;
    height:250px;
    overflow-y:scroll;
  }

  .chat .entry{
    width:250px;
    height:40px;
    padding:5px;
    margin-top:5px;
    font:1em Arial;
  }

  .chat .message a {
    color:slategray;
  }

  .chat .message p{
    margin:5px;
  }
</style>
<div class="chat">
	<div class="messages">
		{% for chat in chats %}
				{{chat.user_id_from}}
				{{chat.content}}
				{{chat.date_created}}
		{% endfor %}
	</div>

		<form method="POST">
			{% csrf_token %}

		<input type="text" id="fname" data-commentid="{{ group.group_id }}">
		<button type="button" class="postbutton" id="comment" data-commentid="{{ group.group_id }}" >
			post
		</button>
		</form>
		<div>
		{% for member in mt %}
				{{member}}
		{% endfor %}
		</div>
</div>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
<script type="text/javascript">

$(function()
{
$('.postbutton').click
(
	function()
	{
			var catid;
			catid = $(this).attr("data-commentid");
		$(this).css("background-color","blue");
		var cid;
		cid = $(this).attr("data-commentid");
		var comment_data;
		comment_data = $(this).parent().find("#fname").val();
		console.log(comment_data)

			$.ajax
		(
				{
						type:"POST",
						url: "/chat/push",
						data:{
						group_id:cid,
						content: comment_data,
							},
							success:function(data){
								var prevState = $(".chat .messages").html();
								console.log(prevState.length);
								message = data.user_id+" "+data.content;
								if(prevState.length >4)
								{ prevState = prevState+"<br>";}
								$(".chat .messages").html(prevState + message );
							}

				}
		)
		console.log("this comment executed correctly");
	}
)
});
</script>
